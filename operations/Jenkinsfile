#!/usr/bin/env groovy

pipeline {
    agent any
    stages {
        stage('Configure Directories') {
            steps {
                sh """pwd
                ls -lart
                zip -r drupal.zip /var/lib/jenkins/workspace/deployer -x '*.git*' -q
                """
            }
        }
        stage('Copy to remote server') {
            steps {
                sh """pwd
                curl --insecure --user ubuntu:{{password}} -T drupal.zip sftp://34.216.214.225/tmp/
                """
            }
        }
    }
}